"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var PromiseProxy = (function () {
    function PromiseProxy() {
        this.promises = [];
    }
    PromiseProxy.prototype.add = function (owner, promise, onResolve, onReject) {
        var _this = this;
        this.promises.push([owner, promise]);
        promise.then(function (result) { return _this.handlePromise([owner, promise], result, onResolve); }, function (reason) { return _this.handlePromise([owner, promise], reason, onReject); });
    };
    PromiseProxy.prototype.remove = function (owner, promise) {
        this.promises = this.promises.filter(function (edge) { return !(owner === edge[0] && promise === edge[1]); });
    };
    PromiseProxy.prototype.handlePromise = function (edge, arg, callback) {
        if (this.promises.find(function (_a) {
            var owner = _a[0], promise = _a[1];
            return (owner === edge[0] && promise === edge[1]);
        })) {
            this.remove(edge[0], edge[1]);
            callback(arg);
        }
    };
    return PromiseProxy;
}());
exports.default = PromiseProxy;
//# sourceMappingURL=promise-proxy.js.map